<?xml version="1.0" encoding="utf-8"?>
<ContentDialog
    x:Class="ImageDeduper.App.Dialogs.SettingsDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    xmlns:vm="using:ImageDeduper.App.ViewModels"
    Title="{Binding Resources.Title}"
    PrimaryButtonText="{Binding Resources.SaveButton}"
    CloseButtonText="{Binding Resources.CancelButton}"
    DefaultButton="Primary">
    <Grid ColumnSpacing="24">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <StackPanel Spacing="12">
            <TextBlock Text="{Binding Resources.SsimLabel}" FontWeight="SemiBold"/>
            <muxc:NumberBox
                Minimum="0.5"
                Maximum="1.0"
                SmallChange="0.01"
                LargeChange="0.05"
                SpinButtonPlacementMode="Compact"
                Value="{Binding SsimThreshold, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                ValueChanged="OnSsimValueChanged"/>
            <TextBlock Text="{Binding Resources.SsimDescription}" Foreground="Gray" FontSize="12" TextWrapping="WrapWholeWords"/>

            <TextBlock Text="{Binding Resources.PhashLabel}" FontWeight="SemiBold"/>
            <muxc:NumberBox
                Minimum="0"
                Maximum="64"
                SmallChange="1"
                SpinButtonPlacementMode="Compact"
                Value="{Binding PhashThreshold, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
            <TextBlock Text="{Binding Resources.PhashDescription}" Foreground="Gray" FontSize="12" TextWrapping="WrapWholeWords"/>

            <TextBlock Text="{Binding Resources.LanguageLabel}" FontWeight="SemiBold"/>
            <ComboBox
                ItemsSource="{Binding Languages}"
                SelectedItem="{Binding SelectedLanguage, Mode=TwoWay}"
                HorizontalAlignment="Stretch"/>
            <TextBlock Text="{Binding Resources.LanguageDescription}" Foreground="Gray" FontSize="12" TextWrapping="WrapWholeWords"/>
        </StackPanel>

        <Border Grid.Column="1" Background="#11111111" CornerRadius="12" Padding="12">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Spacing="8">
                    <TextBlock Text="{Binding Resources.FormatsTitle}" FontWeight="SemiBold"/>
                    <TextBlock Text="{Binding Resources.FormatsDescription}" Foreground="Gray" FontSize="12" TextWrapping="WrapWholeWords"/>
                    <ItemsControl ItemsSource="{Binding FormatInfos}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate x:DataType="vm:ImageFormatInfo">
                                <StackPanel Margin="0,8,0,8">
                                    <TextBlock Text="{x:Bind Name}" FontWeight="SemiBold"/>
                                    <TextBlock Text="{x:Bind ExtensionsLabel}" Foreground="Gray"/>
                                    <TextBlock Text="{x:Bind StatusText}" />
                                    <HyperlinkButton Content="{x:Bind StoreLinkLabel}"
                                                     NavigateUri="{x:Bind StoreLinkUri}"
                                                     Visibility="{Binding ShowStoreLink, Converter={StaticResource BoolToVisibilityConverter}}"
                                                     Padding="0"
                                                     HorizontalAlignment="Left"/>
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </ScrollViewer>
        </Border>
    </Grid>
</ContentDialog>
